<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Copenhell 2026 ‚Äî Band Anbefaler</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #c0392b;
    --black: #0a0a0a;
    --dark: #111;
    --mid: #1a1a1a;
    --light: #2a2a2a;
    --text: #e8e8e8;
    --muted: #666;
    --green: #1DB954;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--black);
    color: var(--text);
    font-family: 'Oswald', sans-serif;
    min-height: 100vh;
    padding: 40px 16px 80px;
  }
  body::before {
    content: '';
    position: fixed; inset: 0;
    background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(192,57,43,0.02) 2px, rgba(192,57,43,0.02) 4px);
    pointer-events: none; z-index: 0;
  }
  .wrap { max-width: 700px; margin: 0 auto; position: relative; z-index: 1; }

  /* Header */
  header { text-align: center; margin-bottom: 40px; }
  .logo {
    font-size: clamp(40px, 10vw, 64px); font-weight: 700;
    color: var(--red); letter-spacing: 6px;
    text-shadow: 0 0 40px rgba(192,57,43,0.4);
    animation: flicker 6s infinite;
  }
  @keyframes flicker {
    0%,94%,100%{opacity:1} 95%{opacity:.7} 96%{opacity:1} 97%{opacity:.5} 98%{opacity:1}
  }
  .tagline {
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px; color: var(--muted);
    letter-spacing: 4px; margin-top: 6px; text-transform: uppercase;
  }
  .rule {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--red), transparent);
    margin: 20px auto; max-width: 500px;
  }

  /* Cards */
  .card {
    background: var(--dark);
    border: 1px solid #1e1e1e;
    border-top: 2px solid var(--red);
    padding: 28px; margin-bottom: 16px;
  }
  .card-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: 10px; color: var(--red);
    letter-spacing: 3px; text-transform: uppercase;
    margin-bottom: 16px;
  }

  /* API key section */
  .api-note {
    font-size: 13px; font-weight: 300; color: #999;
    line-height: 1.6; margin-bottom: 14px;
  }
  .api-note a { color: var(--red); }
  .api-row { display: flex; gap: 10px; }
  .api-input {
    flex: 1;
    background: var(--mid); border: 1px solid #333;
    border-bottom: 2px solid #333; color: var(--text);
    font-family: 'Share Tech Mono', monospace;
    font-size: 13px; padding: 10px 12px; outline: none;
    transition: border-color .2s;
  }
  .api-input:focus { border-color: var(--red); }
  .api-save {
    background: #222; border: 1px solid #444; color: #ccc;
    font-family: 'Oswald', sans-serif; font-size: 13px;
    font-weight: 700; letter-spacing: 2px; padding: 10px 18px;
    cursor: pointer; text-transform: uppercase; white-space: nowrap;
    transition: background .2s;
  }
  .api-save:hover { background: #333; }
  .api-status {
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px; margin-top: 8px;
  }
  .api-status.ok { color: var(--green); }
  .api-status.err { color: var(--red); }

  /* Band inputs */
  .desc { font-size: 15px; font-weight: 300; color: #bbb; line-height: 1.6; margin-bottom: 22px; }
  .inputs { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 18px; }
  @media(max-width:500px){ .inputs { grid-template-columns: 1fr; } }
  .inp-wrap { position: relative; }
  .inp-num {
    position: absolute; top: 10px; left: 10px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 10px; color: var(--red); pointer-events: none;
  }
  .band-input {
    width: 100%; background: var(--mid);
    border: 1px solid #333; border-bottom: 2px solid #333;
    color: var(--text); font-family: 'Oswald', sans-serif;
    font-size: 16px; padding: 10px 10px 10px 30px; outline: none;
    transition: border-color .2s;
  }
  .band-input:focus { border-color: var(--red); border-bottom-color: var(--red); }
  .band-input::placeholder { color: #3a3a3a; }

  /* Submit */
  .btn-submit {
    width: 100%; background: var(--red); border: none;
    color: #fff; font-family: 'Oswald', sans-serif;
    font-size: 18px; font-weight: 700; letter-spacing: 3px;
    text-transform: uppercase; padding: 16px;
    cursor: pointer; transition: background .2s;
  }
  .btn-submit:hover { background: #a93226; }
  .btn-submit:disabled { background: #333; cursor: not-allowed; }

  .err-box {
    display: none; margin-top: 12px; padding: 12px 16px;
    background: rgba(192,57,43,.1); border: 1px solid var(--red);
    font-family: 'Share Tech Mono', monospace;
    font-size: 12px; color: var(--red);
  }

  /* Loading */
  #loading { display: none; text-align: center; padding: 60px 0; }
  .skull { font-size: 56px; display: inline-block; animation: bang .25s ease-in-out infinite alternate; }
  @keyframes bang {
    from { transform: rotate(-12deg) translateY(0); }
    to   { transform: rotate(12deg) translateY(-10px); }
  }
  .load-txt {
    font-family: 'Share Tech Mono', monospace;
    font-size: 12px; color: var(--muted); letter-spacing: 2px;
    margin-top: 18px; animation: blink 1.4s ease-in-out infinite;
  }
  @keyframes blink { 0%,100%{opacity:.3} 50%{opacity:1} }

  /* Results */
  #results { display: none; }
  .res-header {
    font-family: 'Share Tech Mono', monospace;
    font-size: 10px; color: var(--red); letter-spacing: 3px;
    text-transform: uppercase; margin-bottom: 8px;
  }
  .res-sub {
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px; color: #444; margin-bottom: 20px;
  }
  .band-card {
    background: var(--dark);
    border: 1px solid #1e1e1e; border-left: 3px solid var(--red);
    padding: 22px; margin-bottom: 10px;
    opacity: 0; transform: translateX(-16px);
    transition: opacity .4s, transform .4s;
  }
  .band-card.show { opacity: 1; transform: translateX(0); }
  .band-name {
    font-size: 22px; font-weight: 700;
    color: var(--red); letter-spacing: 2px; margin-bottom: 4px;
  }
  .band-hype {
    font-size: 13px; color: #ddd; font-style: italic;
    border-left: 2px solid var(--red); padding-left: 10px;
    margin-bottom: 10px;
  }
  .band-reason {
    font-size: 14px; font-weight: 300; color: #bbb;
    line-height: 1.7; margin-bottom: 14px;
  }
  .spotify-btn {
    display: inline-block; background: var(--green);
    color: #000; font-family: 'Oswald', sans-serif;
    font-size: 13px; font-weight: 700; letter-spacing: 1px;
    padding: 6px 16px; border-radius: 20px;
    text-decoration: none; transition: opacity .2s;
  }
  .spotify-btn:hover { opacity: .85; }
  .btn-reset {
    margin-top: 24px; background: transparent;
    border: 1px solid #2a2a2a; color: var(--muted);
    font-family: 'Oswald', sans-serif; font-size: 14px;
    letter-spacing: 2px; padding: 10px 24px;
    cursor: pointer; text-transform: uppercase;
    transition: border-color .2s, color .2s;
  }
  .btn-reset:hover { border-color: var(--red); color: var(--text); }
</style>
</head>
<body>
<div class="wrap">

  <header>
    <div class="logo">COPENHELL</div>
    <div class="tagline">2026 ¬∑ AI Band Anbefaler</div>
    <div class="rule"></div>
  </header>

  <!-- API Key -->
  <div class="card" id="apiCard">
    <div class="card-label">// Anthropic API N√∏gle</div>
    <p class="api-note">
      Appen bruger Claude til at analysere din musiksmag. Du skal bruge en gratis API-n√∏gle fra
      <a href="https://console.anthropic.com/settings/keys" target="_blank">console.anthropic.com</a>.
      N√∏glen gemmes kun i din browser og sendes aldrig til andre.
    </p>
    <div class="api-row">
      <input class="api-input" type="password" id="apiKeyInput" placeholder="sk-ant-..." />
      <button class="api-save" onclick="saveKey()">GEM</button>
    </div>
    <div class="api-status" id="apiStatus"></div>
  </div>

  <!-- Band inputs -->
  <div class="card" id="inputCard">
    <div class="card-label">// Dine 3 favoritbands</div>
    <p class="desc">Indtast dine absolutte yndlingsbands ‚Äî Claude finder de 5 bedste match fra Copenhell 2026 lineuppet baseret p√• din musiksmag.</p>
    <div class="inputs">
      <div class="inp-wrap"><span class="inp-num">01</span><input class="band-input" id="b1" type="text" placeholder="fx Metallica" /></div>
      <div class="inp-wrap"><span class="inp-num">02</span><input class="band-input" id="b2" type="text" placeholder="fx AC/DC" /></div>
      <div class="inp-wrap"><span class="inp-num">03</span><input class="band-input" id="b3" type="text" placeholder="fx Slipknot" /></div>
    </div>
    <button class="btn-submit" id="submitBtn" onclick="getRecommendations()">ü§ò Find mine Copenhell-bands</button>
    <div class="err-box" id="errBox"></div>
  </div>

  <!-- Loading -->
  <div id="loading">
    <div class="skull">üíÄ</div>
    <div class="load-txt">Claude analyserer din musiksmag...</div>
  </div>

  <!-- Results -->
  <div id="results">
    <div class="res-header">// Dine 5 anbefalinger fra Copenhell 2026</div>
    <div class="res-sub" id="resSub"></div>
    <div id="cardContainer"></div>
    <button class="btn-reset" onclick="reset()">‚Üê Pr√∏v igen</button>
  </div>

</div>

<script>
const LINEUP = [
  "Iron Maiden","Bring Me The Horizon","Volbeat","Twisted Sister","Alice Cooper",
  "Papa Roach","A Perfect Circle","Trivium","Anthrax","Sepultura","The Pretty Reckless",
  "P.O.D.","Kublai Khan TX","President","Tom Morello","Mastodon","Social Distortion",
  "Bury Tomorrow","Paleface Swiss","All Them Witches","Mammoth","Loathe","Dogma",
  "Slay Squad","Calva Louise","Lightchapter","H√•ndgemeng","Henret","Scimitar",
  "Babymetal","Black Label Society","Suicidal Tendencies","Imminence","Soilwork",
  "Djerv","Eyehategod","Faetooth","Unpeople","Maceration","Morild","Pustulant Flesh",
  "Rap Martin Rap","Alestorm","Ice Nine Kills","Gaerea","Black Oak County",
  "Queensryche","Static-X","Defecto","Six Feet Under","Konvent","Iotunn",
  "Die Spitz","Thrown","Trollfest","Katla","Neckbreakker","Omsorg","Blood Fire Death",
  "Gridiron","Split","Twenty One Children","Chopper","Violent Magic Orchestra",
  "End It","Malevolence","Inhuman Nature","Vexed","Powerplant","Psycho Mosher"
];

// Load saved key
window.addEventListener('load', () => {
  const saved = localStorage.getItem('anthropic_key');
  if (saved) {
    document.getElementById('apiKeyInput').value = saved;
    setKeyStatus(true);
  }
});

function saveKey() {
  const key = document.getElementById('apiKeyInput').value.trim();
  if (!key.startsWith('sk-ant-')) {
    setKeyStatus(false, 'N√∏glen skal starte med sk-ant-');
    return;
  }
  localStorage.setItem('anthropic_key', key);
  setKeyStatus(true);
}

function setKeyStatus(ok, msg) {
  const el = document.getElementById('apiStatus');
  if (ok) {
    el.textContent = '// N√∏gle gemt ‚úì';
    el.className = 'api-status ok';
  } else {
    el.textContent = '// ' + (msg || 'Ugyldig n√∏gle');
    el.className = 'api-status err';
  }
}

function showErr(msg) {
  const el = document.getElementById('errBox');
  el.textContent = '// ' + msg;
  el.style.display = 'block';
}

async function getRecommendations() {
  const key = localStorage.getItem('anthropic_key');
  if (!key) { showErr('Gem din API-n√∏gle f√∏rst.'); return; }

  const b1 = document.getElementById('b1').value.trim();
  const b2 = document.getElementById('b2').value.trim();
  const b3 = document.getElementById('b3').value.trim();
  if (!b1 || !b2 || !b3) { showErr('Udfyld alle 3 favoritbands.'); return; }

  document.getElementById('inputCard').style.display = 'none';
  document.getElementById('apiCard').style.display = 'none';
  document.getElementById('loading').style.display = 'block';
  document.getElementById('errBox').style.display = 'none';

  const prompt = `Du er en metal-ekspert der hj√¶lper fans med at finde nye bands at opdage.

En bruger elsker disse 3 bands: "${b1}", "${b2}", "${b3}".

Copenhell 2026 lineup:
${LINEUP.join(', ')}

Analyser brugerens musiksmag og v√¶lg de 5 mest relevante bands fra lineuppet.

Svar KUN med valid JSON uden markdown:
{
  "recommendations": [
    {
      "name": "Pr√¶cist bandnavn fra lineup",
      "hype": "Kort fed s√¶lgende s√¶tning p√• dansk, max 10 ord",
      "reason": "2-3 s√¶tninger p√• dansk om hvorfor bandet passer til brugerens smag med specifikke referencer til de 3 favoritbands"
    }
  ]
}`;

  try {
    const resp = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': key,
        'anthropic-version': '2023-06-01',
        'anthropic-dangerous-direct-browser-access': 'true'
      },
      body: JSON.stringify({
        model: 'claude-haiku-4-5-20251001',
        max_tokens: 1000,
        messages: [{ role: 'user', content: prompt }]
      })
    });

    if (!resp.ok) {
      const err = await resp.json();
      throw new Error(err.error?.message || resp.statusText);
    }

    const data = await resp.json();
    const text = data.content[0].text.replace(/```json|```/g, '').trim();
    const json = JSON.parse(text);

    showResults(json.recommendations, b1, b2, b3);

  } catch(e) {
    document.getElementById('loading').style.display = 'none';
    document.getElementById('inputCard').style.display = 'block';
    document.getElementById('apiCard').style.display = 'block';
    showErr('Fejl: ' + e.message);
  }
}

function showResults(recs, b1, b2, b3) {
  document.getElementById('loading').style.display = 'none';
  document.getElementById('results').style.display = 'block';
  document.getElementById('resSub').textContent =
    'Baseret p√•: ' + b1.toUpperCase() + ' ¬∑ ' + b2.toUpperCase() + ' ¬∑ ' + b3.toUpperCase();

  const container = document.getElementById('cardContainer');
  container.innerHTML = '';

  recs.forEach((rec, i) => {
    const card = document.createElement('div');
    card.className = 'band-card';
    card.innerHTML = `
      <div class="band-name">${rec.name.toUpperCase()}</div>
      <div class="band-hype">${rec.hype}</div>
      <div class="band-reason">${rec.reason}</div>
      <a class="spotify-btn" href="https://open.spotify.com/search/${encodeURIComponent(rec.name)}" target="_blank">
        ‚ñ∂ √Öbn i Spotify
      </a>`;
    container.appendChild(card);
    setTimeout(() => card.classList.add('show'), i * 150 + 50);
  });
}

function reset() {
  document.getElementById('results').style.display = 'none';
  document.getElementById('inputCard').style.display = 'block';
  document.getElementById('apiCard').style.display = 'block';
  document.getElementById('cardContainer').innerHTML = '';
  document.getElementById('b1').value = '';
  document.getElementById('b2').value = '';
  document.getElementById('b3').value = '';
}

document.addEventListener('keydown', e => {
  if (e.key === 'Enter') getRecommendations();
});
</script>
</body>
</html>
